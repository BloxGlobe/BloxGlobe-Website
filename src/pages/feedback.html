<h1 class="text-3xl font-bold mb-4">User Feedback</h1>

<p class="opacity-80 mb-6">
  Submit and view your feedback. Your messages stay saved in your local cloud.
</p>

<!-- FEEDBACK FORM -->
<div class="bg-gray-800 p-6 rounded-xl mb-6">
  <h2 class="text-xl font-semibold mb-3">Send Feedback</h2>

  <!-- GIANT SMOOTH BAR -->
  <div class="relative">
    <textarea
      id="feedbackInput"
      class="w-full p-5 rounded-xl bg-gray-700 outline-none text-lg 
             transition-all duration-300 resize-none shadow-lg
             focus:bg-gray-600 focus:shadow-[0_0_15px_rgba(59,130,246,0.5)]"
      rows="4"
      placeholder="Write something amazing..."></textarea>

    <div id="inputBar"
      class="absolute left-0 right-0 bottom-0 h-1 bg-blue-600 rounded-full
             scale-x-0 origin-left transition-all duration-300"></div>
  </div>

  <!-- SUBMIT BUTTON -->
  <button
    id="submitFeedback"
    class="mt-4 w-full py-3 text-lg bg-blue-600 hover:bg-blue-700 
           rounded-xl transition-all duration-300 font-semibold
           hover:scale-[1.02] active:scale-95 shadow-md">
    Send Feedback
  </button>

  <p id="feedbackStatus" class="text-green-400 mt-2 opacity-0 transition text-sm">
    Saved!
  </p>
</div>

<!-- LIST -->
<div class="bg-gray-800 p-6 rounded-xl">
  <h2 class="text-xl font-semibold mb-3">Feedback List</h2>

  <div id="feedbackList" class="space-y-3 text-gray-300">
    <div class="opacity-60">Loading feedback...</div>
  </div>
</div>

<script>
/* -----------------------------------
     FEEDBACK SYSTEM + ANIMATIONS
------------------------------------ */
const STORAGE_KEY = "bloxglobe_feedbacks";
const input = document.getElementById("feedbackInput");
const bar = document.getElementById("inputBar");
const statusMsg = document.getElementById("feedbackStatus");
const listContainer = document.getElementById("feedbackList");

/* Underline animation */
input.addEventListener("focus", () => bar.classList.add("scale-x-100"));
input.addEventListener("blur", () => bar.classList.remove("scale-x-100"));

/* Load feedbacks on page load */
function loadFeedbacks() {
  const saved = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

  if (saved.length === 0) {
    listContainer.innerHTML = `<div class="opacity-60">No feedback yet.</div>`;
    return;
  }

  listContainer.innerHTML = "";

  saved.forEach((msg, index) => {
    const box = document.createElement("div");
    box.className =
      "p-4 bg-gray-700 rounded-lg transform transition-all duration-500 opacity-0 translate-y-3";

    box.innerHTML = `
      <p>${msg.text}</p>
      <div class="text-xs opacity-60 mt-1">${msg.date}</div>
    `;

    listContainer.appendChild(box);

    setTimeout(() => {
      box.classList.remove("opacity-0", "translate-y-3");
    }, index * 50);
  });
}

/* Save feedback */
function saveFeedback() {
  const text = input.value.trim();
  if (!text) return;

  const entry = {
    text,
    date: new Date().toLocaleString(),
  };

  const current = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
  current.unshift(entry);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(current));

  input.value = "";

  statusMsg.classList.remove("opacity-0");
  setTimeout(() => statusMsg.classList.add("opacity-0"), 1500);

  loadFeedbacks();
}

document.getElementById("submitFeedback").addEventListener("click", saveFeedback);

/* Initial load */
loadFeedbacks();
</script>

<style>
.scale-x-100 { transform: scaleX(1); }
</style>
