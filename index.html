<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BloxGlobe Dashboard</title>

  <!-- Correct CSS path -->
  <link rel="stylesheet" href="src/assets/styles/globals.css" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-900 text-white">

  <div class="flex h-screen">

    <!-- Sidebar -->
    <aside class="w-64 bg-gray-800 p-5 flex flex-col gap-3">
      <h1 class="text-xl font-bold mb-4">BloxGlobe Panel</h1>

      <button class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-gray-700" data-page="home">Home</button>
      <button class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-gray-700" data-page="experience">Experiences</button>
      <button class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-gray-700" data-page="ugc">UGC Clothing</button>
      <button class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-gray-700" data-page="feedback">Feedback</button>
      <button class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-gray-700" data-page="site">Site Updates</button>
      <button class="nav-btn block w-full text-left px-3 py-2 rounded hover:bg-gray-700" data-page="setting">Settings</button>
    </aside>

    <!-- Main Content -->
    <main id="app" class="flex-1 p-6 overflow-y-auto">
      Loading...
    </main>

  </div>

<script>
/* -----------------------------------
   PAGE LOADER (src/pages/*.html)
------------------------------------- */
(function(){
  const app = document.getElementById('app');

  async function loadPage(page){
    try{
      const res = await fetch(`src/pages/${page}.html`);
      if(!res.ok) throw new Error("Page not found");

      const html = await res.text();
      app.innerHTML = html;

      // Set active button
      document.querySelectorAll('.nav-btn')
        .forEach(btn => btn.classList.remove('bg-gray-700'));

      const active = document.querySelector(`.nav-btn[data-page="${page}"]`);
      if(active) active.classList.add('bg-gray-700');

      // Update URL hash
      history.replaceState({page: page}, '', `#${page}`);

    } catch(err){
      load404();
    }
  }

  async function load404(){
    const res = await fetch(`src/pages/404.html`);
    app.innerHTML = await res.text();
  }

  // Attach click listeners
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', () => loadPage(btn.dataset.page));
  });

  // Initial load by hash
  const initial = location.hash ? location.hash.slice(1) : 'home';
  loadPage(initial);

  // Browser navigation
  window.addEventListener('popstate', (e)=>{
    const page = (e.state && e.state.page) || location.hash.slice(1) || 'home';
    loadPage(page);
  });

})();
</script>

</body>
</html>
